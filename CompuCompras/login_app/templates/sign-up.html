{%extends 'base_wf.html'%}

    {%block content%}
    
    <main>
        <form method="post" action="">
            
          {% csrf_token %}
          {{form}}
          <button type="submit">Crear Cuenta</button>

        </form>
    </main>

    <script>
    const form = document.querySelector('form');
    form.addEventListener('submit', (event) => {
      event.preventDefault();

      const name = document.getElementById("username").value;
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
            return userCredential.user.updateProfile({
              displayName: name
            });
          })
        .then((userCredential) => {
          // La cuenta fue creada exitosamente, redirigir al usuario a la página principal
          alert('Usuario registrado correctamente.');
          window.location.href = "index.html";
        })
        .catch((error) => {
          // Hubo un error durante la creación de la cuenta, mostrar un mensaje de error al usuario
          const errorMessage = error.message;
          alert(errorMessage);
        });
        });
    </script>

{%endblock%}